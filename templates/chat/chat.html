{% extends 'main/base.html' %}
{% load static %}

{% block title %}Chat - Research Assistant{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/chat.css' %}">
{% endblock %}

{% block content %}
<!-- System Metrics Side Panel -->
<div class="metrics-side-panel">
    <div class="metrics-header">
        <h2 class="text-lg font-semibold">System Metrics</h2>
        <button class="metrics-toggle" aria-label="Toggle Metrics">
            <svg class="metrics-toggle-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M6 9l6 6 6-6"/>
            </svg>
        </button>
    </div>
    <div class="metrics-content">
        <div class="grid grid-cols-1 gap-4 text-sm" id="metrics">
            <!-- Metrics will be populated here -->
        </div>
    </div>
</div>

<!-- Main Chat Container (Centered) -->
<div class="chat-container">
    <!-- Chat Header -->
    <div class="chat-header">
        <h1 class="text-2xl font-bold">Research Assistant</h1>
        <div class="text-sm opacity-75" id="sessionInfo">
            Session ID: <span id="sessionId"></span>
        </div>
    </div>
    
    <!-- Chat Messages -->
    <div class="chat-messages" id="chatMessages">
        <!-- Message Template -->
        <template id="messageTemplate">
            <div class="message">
                <div class="message-avatar">
                    <img src="{% static 'images/assistant-avatar.png' %}" alt="AI Avatar">
                </div>
                <div class="message-content">
                    <!-- Message text will be inserted here -->
                </div>
            </div>
        </template>
    </div>
    
    <!-- Message Input -->
    <div class="message-input">
        <div class="flex items-center">
            <textarea 
                id="messageInput"
                placeholder="Type your message..."
                rows="2"
            ></textarea>
            <button id="sendButton" class="ml-2">
                Send
            </button>
        </div>
    </div>
</div>

<script src="{% static 'js/chat.js' %}?v=1"></script>
{% endblock %} 